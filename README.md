# WeekendTrip_Bot
![WeekendTrip_Bot logo](https://github.com/zhemojtel/WeekendTrip_Bot/blob/main/images/logo_1.png) 

Если вы хотите полете отдахнуть, но пока еще не определились куда,  то telegram-бот поможет вам в этом, проанализируя сайт [Openweathermap](https://openweathermap.org/) бот предоставит интересующую вас информацию о погоде , что поможет принять окончательное решение, стоит лететь или нет. Но а если вы уже определились, то telegram-бот проанализируя сайт [Aviasales](https://www.aviasales.by) и подберет  подходящие авиабилеты.
Работает с API от [Aviasales](https://www.aviasales.by) и [Openweathermap](https://openweathermap.org/)
```
* Language (язык): Russian
* Author (Автор): Олег Жемойтель
```
# Как запустить бота:
* Клонировать репозиторий
* Создать telegram-бота у [BotFather](https://t.me/BotFather) и получить токен
* Получить ключ от rapidapi:
  * Зарегистрироваться на сайте [Travelpayouts](https://app.travelpayouts.com/dashboard)
  * Получили там свой Your API token и Your marker
  * Зарегистрироваться на сайте [rapidapi.com](https://rapidapi.com/hub)
  * Перейти в API Marketplace → категория Weather → WeatherAPI.com
 (либо просто перейти по прямой ссылке на документацию [WeatherAPI.com API Documentation](https://rapidapi.com/weatherapi/api/weatherapi-com/))
  * Нажать кнопку Subscribe to Test
  * Выбрать пакет (есть бесплатный вариант)
  * Забрать KEY
  * Файл .env прописать там BOT_TOKEN и RAPID_API_KEY
____________________________
# Возможности бота:
Бот реагирует на команды:

* `/start` — Запустить бота
* `/help` — Вывести справку
* `/search` - Поиск билета
* `/lowprice` — Вывести Топ самых дешёвых авиабилетов
* `/highprice` — Вывести Топ самых дорогих авиабилетов
* `/history` — История поиска
* `/ Weather` - Прогноз погоды
  

# Принцип работы
После ввода команд /lowprice и /highprice бот проводит опрос пользователя:
```
 * город отправления
 * города назначения 
 * месяц отъезда (гггг-мм)
 * месяц возврата (гггг-мм)
 * валюта цен
```
При вводе команды /Weather запрашивается:
```
 * погода в каком городе интересует
 * даты прогноза погоды
```
После опроса Бот делает запрос к API и выводит результат.

При удачных запросах ведется история поиска. Все запросы и их результат сохраняется в базе данных.

При вводе команды /history пользователю предлагается уточнить действие:

 * Показать историю поиска — будет показана вся история поисковых запросов пользователя. При нажатии на конкретный запрос выводится результат того поиска.
 * Очистить историю — вся история поиска будет удалена из базы данных.